"use strict";(self.webpackChunkcocktailsmaster=self.webpackChunkcocktailsmaster||[]).push([[431],{431:function(e,n,t){t.r(n),t.d(n,{default:function(){return M}});var r=t(165),a=t(861),c=t(439),i=t(791),s="HomePage_container__L74-a",l="HomePage_grid__tdLiS",o="HomePage_cocktailsResults__O+23H",u="HomePage_contentCard__RE+nk";var d="Search_searchBar__dnqc7",f=t(184);var p=function(e){var n=e.setFilter,t=e.currentFilter,s=(0,i.useState)(""),l=(0,c.Z)(s,2),o=l[0],u=l[1],p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,t=(0,i.useState)(),r=(0,c.Z)(t,2),a=r[0],s=r[1],l=function(){for(var t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];var i=setTimeout((function(){e.apply(void 0,r)}),n);clearTimeout(a),s(i)};return l}(p);return(0,i.useEffect)((function(){o&&n(o)}),[o]),(0,f.jsxs)("div",{className:"d-flex flex-row justify-content-center align-item-center my-10 ".concat(d),children:[(0,f.jsx)("i",{className:"fa-solid fa-magnifying-glass mr-15"}),(0,f.jsx)("input",{onChange:function(e){return h(e.target.value)},className:"flex-fill",type:"text",placeholder:t})]})},h=t(689),v="Recipe_recipe__9mDnP",x="Recipe_imageContainer__b0gr6",m="Recipe_recipeContent__QvMjm";var g=function(e){var n=e.cocktails,t=(0,i.useState)(!1),r=(0,c.Z)(t,2),a=r[0],s=r[1],l=(0,h.s0)();return(0,f.jsxs)("div",{className:v,children:[(0,f.jsx)("div",{className:x,children:(0,f.jsx)("img",{src:n.strDrinkThumb,alt:n.strDrink,onClick:function(){return l("/recipe/".concat(n.strDrink))}})}),(0,f.jsxs)("div",{className:"".concat(m," d-flex flex-column space-between align-items-center pb-10 pt-5"),children:[(0,f.jsx)("h3",{className:"text-center",children:n.strDrink}),(0,f.jsx)("i",{onClick:function(){s(!a)},className:"fa-solid fa-heart ".concat(a?"text-primary":"")})]})]})},_="Loading_spinner__zgkpH";var k=function(){return(0,f.jsx)("div",{className:"d-flex flex-row align-items-center justify-content-center flex-fill",children:(0,f.jsx)("i",{className:"fa-solid fa-spinner ".concat(_)})})},C=t(388),w=function(e){var n=e.includes("Alcoholic")&&!e.includes("Non_Alcoholic")||!e.includes("Alcoholic")&&e.includes("Non_Alcoholic"),t=e.includes("Ordinary_Drink")&&!e.includes("Cocktail")||!e.includes("Ordinary_Drink")&&e.includes("Cocktail"),r=e.includes("Cocktail_glass")&&!e.includes("Champagne_flute")||!e.includes("Cocktail_glass")&&e.includes("Champagne_flute");return{strAlcoholic:n&&e.includes("Alcoholic")?"Alcoholic":n&&e.includes("Non_Alcoholic")?"Non alcoholic":null,strCategory:t&&e.includes("Ordinary_Drink")?"Ordinary Drink":t&&e.includes("Cocktail")?"Cocktail":null,strGlass:r&&e.includes("Cocktail_glass")?"Cocktail glass":r&&e.includes("Champagne_flute")?"Champagne flute":null}},j=function(e,n){var t=Object.keys(n);return e?e.filter((function(e){return t.every((function(t){return!n[t].length||(Array.isArray(e[t])?e[t].some((function(e){return n[t].includes(e)})):n[t].includes(e[t]))}))})):[]},y=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a,i,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.map((function(e){return e.value})),e.next=3,w(a);case 3:return i=e.sent,s=Object.fromEntries(Object.entries(i).filter((function(e){return null!==(0,c.Z)(e,2)[1]}))),e.next=7,j(t,s);case 7:return l=e.sent,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),N={filterListByCategories:y},b=C.Z.create({baseURL:"https://www.thecocktaildb.com/api/json/v1/1/"}),Z={searchCocktails:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.get("search.php?s=".concat(n));case 3:return t=e.sent,e.abrupt("return",t.data.drinks);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Error fetch cocktails");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),searchByFilters:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.filterListByCategories(n,t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),searchByLetter:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.get("search.php?f=".concat(n));case 3:return t=e.sent,e.abrupt("return",t.data.drinks);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Error fetch cocktails by first letter");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}()},A=t(413);var T=function(e,n){if("CURRENT_COCKTAILS"===n.type)return(0,A.Z)((0,A.Z)({},e),{},{cocktails:n.payload});throw new Error("action inconnue")},S={pagination:"Paginate_pagination__9umvm",paginateItems:"Paginate_paginateItems__H7xrW",active:"Paginate_active__JgGWW"},P=function(e){for(var n=e.postsPerPage,t=e.totalPosts,r=e.paginate,a=e.previousPage,c=e.nextPage,i=e.currentPageNumber,s=[],l=1;l<=Math.ceil(t/n);l++)s.push(l);return(0,f.jsx)("div",{className:S.paginationContainer,children:(0,f.jsxs)("ul",{className:S.pagination,children:[(0,f.jsx)("li",{onClick:a,className:S.paginateItems,children:"Prev"}),s.map((function(e,n){return(0,f.jsx)("li",{onClick:function(){return r(e)},className:"".concat(S.paginateItems," ")+(e===i?"".concat(S.active):""),children:e},n)})),(0,f.jsx)("li",{onClick:c,className:S.paginateItems,children:"Next"})]})})},R=t(433),L={dropdownContainer:"DropdownFilters_dropdownContainer__O9oAJ",dropdownInput:"DropdownFilters_dropdownInput__bn1fy",dropdownMenu:"DropdownFilters_dropdownMenu__8M+X0",dropdownTags:"DropdownFilters_dropdownTags__zPt6l",dropdownTagItem:"DropdownFilters_dropdownTagItem__d771G",dropdownTagClose:"DropdownFilters_dropdownTagClose__RVAvA",searchBox:"DropdownFilters_searchBox__Lj-Xe"},E=function(){return(0,f.jsx)("svg",{height:"20",width:"20",viewBox:"0 0 20 20",children:(0,f.jsx)("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"})})},D=function(e){var n=e.placeHolder,t=e.options,r=e.isMulti,a=e.isSearchable,s=e.onChange,l=(0,i.useState)(!1),o=(0,c.Z)(l,2),u=o[0],d=o[1],p=(0,i.useState)(r?[]:null),h=(0,c.Z)(p,2),v=h[0],x=h[1],m=(0,i.useState)(""),g=(0,c.Z)(m,2),_=g[0],k=g[1],C=(0,i.useRef)(null),w=(0,i.useRef)(null);(0,i.useEffect)((function(){k(""),u&&C.current&&C.current.focus()}),[u]),(0,i.useEffect)((function(){var e=function(e){w.current&&!w.current.contains(e.target)&&d(!1)};return window.addEventListener("click",e),function(){window.removeEventListener("click",e)}}));var j=function(e){return null===v||void 0===v?void 0:v.filter((function(n){return n.value!==e.value}))},y=function(e){var n;n=r?v.findIndex((function(n){return n.value===e.value}))>=0?j(e):[].concat((0,R.Z)(v),[e]):e,x(n),s(n)},N=function(e){return r?v.filter((function(n){return n.value===e.value})).length>0:!!v&&v.value===e.value};return(0,f.jsxs)("div",{className:L.dropdownContainer,children:[(0,f.jsxs)("div",{ref:w,onClick:function(){d(!u)},className:L.dropdownInput,children:[(0,f.jsx)("div",{className:L.dropdownSelectedValue,children:v&&0!==v.length?r?(0,f.jsx)("div",{className:L.dropdownTags,children:v.map((function(e){return(0,f.jsxs)("div",{className:L.dropdownTagItem,children:[e.label,(0,f.jsx)("span",{onClick:function(n){return function(e,n){e.stopPropagation();var t=j(n);x(t),s(t)}(n,e)},className:L.dropdownTagClose,children:(0,f.jsx)("i",{className:"fa-solid fa-xmark ml-5 vertical-center-content"})})]},e.id)}))}):v.label:n}),(0,f.jsx)("div",{className:L.dropdownTools,children:(0,f.jsx)("div",{className:L.dropdownTool,children:(0,f.jsx)(E,{})})})]}),u&&(0,f.jsxs)("div",{className:L.dropdownMenu,children:[a&&(0,f.jsx)("div",{className:L.searchBox,children:(0,f.jsx)("input",{onChange:function(e){k(e.target.value)},value:_,ref:C})}),(_?t.filter((function(e){return e.label.toLowerCase().indexOf(_.toLowerCase())>=0})):t).map((function(e){return(0,f.jsxs)("div",{className:"my-10",children:[(0,f.jsx)("input",{onChange:function(){return y(e)},type:"checkbox",checked:N(e)}),(0,f.jsx)("label",{children:e.label})]},e.id)}))]})]})},I="AlphabeticalFilter_alphabeticalFilter__8KCuG",O=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],F=function(e){var n=e.setLetter;return(0,f.jsx)("div",{className:I,children:(0,f.jsx)("ul",{children:O.map((function(e,t){return(0,f.jsx)("li",{onClick:function(){return n(e)},children:e},t)}))})})},B=[{value:"Alcoholic",label:"Alcoholic",id:0},{value:"Non_Alcoholic",label:"Non Alcoholic",id:1},{value:"Ordinary_Drink",label:"Ordinary Drink",id:2},{value:"Cocktail",label:"Cocktail",id:3},{value:"Cocktail_glass",label:"Cocktail glass",id:4},{value:"Champagne_flute",label:"Champagne flute",id:5}];var M=function(){var e=(0,i.useState)("margarita"),n=(0,c.Z)(e,2),t=n[0],d=n[1],h=(0,i.useState)(""),v=(0,c.Z)(h,2),x=v[0],m=v[1],_=(0,i.useState)([]),C=(0,c.Z)(_,2),w=C[0],j=C[1],y=(0,i.useState)(!0),N=(0,c.Z)(y,2),b=N[0],A=N[1],S=(0,i.useReducer)(T,{cocktails:[]}),R=(0,c.Z)(S,2),L=R[0],E=R[1],I=(0,i.useState)(1),O=(0,c.Z)(I,2),M=O[0],H=O[1],K=(0,i.useState)(6),U=(0,c.Z)(K,1)[0],G=M*U,z=G-U,W=L.cocktails.slice(z,G);return(0,i.useEffect)((function(){var e=!1;function n(){return(n=(0,a.Z)((0,r.Z)().mark((function n(){var a,c;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!t){n.next=20;break}return m(""),n.next=5,Z.searchCocktails(t);case 5:if(a=n.sent,e){n.next=20;break}if(!t||w.length){n.next=11;break}E({type:"CURRENT_COCKTAILS",payload:a||[]}),n.next=20;break;case 11:if(!t||!w.length){n.next=18;break}return n.next=14,Z.searchByFilters(w,a);case 14:(c=n.sent)&&E({type:"CURRENT_COCKTAILS",payload:c}),n.next=20;break;case 18:E({type:"CURRENT_COCKTAILS",payload:[]});case 20:n.next=25;break;case 22:n.prev=22,n.t0=n.catch(0),console.error(n.t0);case 25:return n.prev=25,e||A(!1),n.finish(25);case 28:case"end":return n.stop()}}),n,null,[[0,22,25,28]])})))).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){return e=!0}}),[t,w]),(0,i.useEffect)((function(){var e=!1;function n(){return(n=(0,a.Z)((0,r.Z)().mark((function n(){var t,a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!x){n.next=15;break}return d(""),n.next=5,Z.searchByLetter(x);case 5:if(t=n.sent,e){n.next=15;break}if(w.length){n.next=11;break}E({type:"CURRENT_COCKTAILS",payload:t||[]}),n.next=15;break;case 11:return n.next=13,Z.searchByFilters(w,t);case 13:(a=n.sent)&&E({type:"CURRENT_COCKTAILS",payload:a});case 15:n.next=20;break;case 17:n.prev=17,n.t0=n.catch(0),console.error(n.t0);case 20:return n.prev=20,e||A(!1),n.finish(20);case 23:case"end":return n.stop()}}),n,null,[[0,17,20,23]])})))).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){return e=!0}}),[x,w]),(0,f.jsxs)("div",{className:s,children:[(0,f.jsx)("h1",{className:"my-10",children:"D\xe9couvrez des nouvelles recettes"}),(0,f.jsxs)("div",{className:"card flex-fill d-flex flex-column px-10 ".concat(u),children:[(0,f.jsx)(D,{isSearchable:!0,isMulti:!0,placeHolder:"S\xe9lectionner les filtres",options:B,onChange:function(e){return j(e||[])}}),(0,f.jsx)(F,{setLetter:m}),(0,f.jsx)(p,{setFilter:d,currentFilter:t}),b&&!L.cocktails.length?(0,f.jsx)(k,{}):(0,f.jsx)(f.Fragment,{children:L.cocktails.length&&!b?(0,f.jsxs)("div",{className:o,children:[(0,f.jsx)("div",{className:l,children:W.map((function(e,n){return(0,f.jsx)(g,{cocktails:e},n)}))}),(0,f.jsx)(P,{postsPerPage:U,totalPosts:L.cocktails.length,paginate:function(e){H(e)},previousPage:function(){1!==M&&H(M-1)},nextPage:function(){M!==Math.ceil(L.cocktails.length/U)&&H(M+1)},currentPageNumber:M})]}):L.cocktails.length||b?(0,f.jsx)("div",{className:o}):(0,f.jsx)("div",{className:o,children:"Aucun r\xe9sultat trouv\xe9"})})]})]})}}}]);
//# sourceMappingURL=431.aea5c2a2.chunk.js.map