"use strict";(self.webpackChunkcocktailsmaster=self.webpackChunkcocktailsmaster||[]).push([[586],{586:function(e,n,t){t.r(n),t.d(n,{default:function(){return M}});var r=t(165),a=t(861),c=t(885),i=t(791),s="HomePage_container__2llfE",l="HomePage_grid__X3Xvw",o="HomePage_noResults__Mh5Pp",u="HomePage_contentCard__k2Ro4",d="Search_searchBar__BNASN",f=t(184);var p=function(e){var n=e.setFilter,t=e.currentFilter;return(0,f.jsxs)("div",{className:"d-flex flex-row justify-content-center align-item-center my-10 ".concat(d),children:[(0,f.jsx)("i",{className:"fa-solid fa-magnifying-glass mr-15"}),(0,f.jsx)("input",{onInput:function(e){var t=e.currentTarget.value;n(t.trim().toLowerCase())},className:"flex-fill",type:"text",placeholder:t})]})},h=t(689),v="Recipe_recipe__a28YQ",x="Recipe_imageContainer__UUkBL",m="Recipe_recipeContent__4K+EZ";var g=function(e){var n=e.cocktails,t=(0,i.useState)(!1),r=(0,c.Z)(t,2),a=r[0],s=r[1],l=(0,h.s0)();return(0,f.jsxs)("div",{className:v,children:[(0,f.jsx)("div",{className:x,children:(0,f.jsx)("img",{src:n.strDrinkThumb,alt:n.strDrink,onClick:function(){return l("/recipe/".concat(n.strDrink))}})}),(0,f.jsxs)("div",{className:"".concat(m," d-flex flex-column space-between align-items-center pb-10 pt-5"),children:[(0,f.jsx)("h3",{className:"text-center",children:n.strDrink}),(0,f.jsx)("i",{onClick:function(){s(!a)},className:"fa-solid fa-heart ".concat(a?"text-primary":"")})]})]})},_="Loading_spinner__p9lwA";var k=function(){return(0,f.jsx)("div",{className:"d-flex flex-row align-items-center justify-content-center flex-fill",children:(0,f.jsx)("i",{className:"fa-solid fa-spinner ".concat(_)})})},C=t(388),w=function(e){var n=e.includes("Alcoholic")&&!e.includes("Non_Alcoholic")||!e.includes("Alcoholic")&&e.includes("Non_Alcoholic"),t=e.includes("Ordinary_Drink")&&!e.includes("Cocktail")||!e.includes("Ordinary_Drink")&&e.includes("Cocktail"),r=e.includes("Cocktail_glass")&&!e.includes("Champagne_flute")||!e.includes("Cocktail_glass")&&e.includes("Champagne_flute");return{strAlcoholic:n&&e.includes("Alcoholic")?"Alcoholic":n&&e.includes("Non_Alcoholic")?"Non alcoholic":null,strCategory:t&&e.includes("Ordinary_Drink")?"Ordinary Drink":t&&e.includes("Cocktail")?"Cocktail":null,strGlass:r&&e.includes("Cocktail_glass")?"Cocktail glass":r&&e.includes("Champagne_flute")?"Champagne flute":null}},j=function(e,n){var t=Object.keys(n);return e.filter((function(e){return t.every((function(t){return!n[t].length||(Array.isArray(e[t])?e[t].some((function(e){return n[t].includes(e)})):n[t].includes(e[t]))}))}))},N=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a,i,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.map((function(e){return e.value})),e.next=3,w(a);case 3:return i=e.sent,s=Object.fromEntries(Object.entries(i).filter((function(e){return null!==(0,c.Z)(e,2)[1]}))),e.next=7,j(t,s);case 7:return l=e.sent,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),y={filterListByCategories:N},b=C.Z.create({baseURL:"https://www.thecocktaildb.com/api/json/v1/1/"}),Z={searchCocktails:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.get("search.php?s=".concat(n));case 3:return t=e.sent,e.abrupt("return",t.data.drinks);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Error fetch cocktails");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),searchByFilters:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.filterListByCategories(n,t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),searchByLetter:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.get("search.php?f=".concat(n));case 3:return t=e.sent,e.abrupt("return",t.data.drinks);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Error fetch cocktails by first letter");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}()},A=t(413);var T=function(e,n){if("CURRENT_COCKTAILS"===n.type)return(0,A.Z)((0,A.Z)({},e),{},{cocktails:n.payload});throw new Error("action inconnue")},P={pagination:"Paginate_pagination__ckmim",paginateItems:"Paginate_paginateItems__kYJM4",active:"Paginate_active__Z5x5O"},E=function(e){for(var n=e.postsPerPage,t=e.totalPosts,r=e.paginate,a=e.previousPage,c=e.nextPage,i=e.currentPageNumber,s=[],l=1;l<=Math.ceil(t/n);l++)s.push(l);return(0,f.jsx)("div",{className:P.paginationContainer,children:(0,f.jsxs)("ul",{className:P.pagination,children:[(0,f.jsx)("li",{onClick:a,className:P.paginateItems,children:"Prev"}),s.map((function(e,n){return(0,f.jsx)("li",{onClick:function(){return r(e)},className:"".concat(P.paginateItems," ")+(e===i?"".concat(P.active):""),children:e},n)})),(0,f.jsx)("li",{onClick:c,className:P.paginateItems,children:"Next"})]})})},S=t(982),R={dropdownContainer:"DropdownFilters_dropdownContainer__OAbhV",dropdownInput:"DropdownFilters_dropdownInput__9Atdi",dropdownMenu:"DropdownFilters_dropdownMenu__0XwHa",dropdownTags:"DropdownFilters_dropdownTags__obGAc",dropdownTagItem:"DropdownFilters_dropdownTagItem__y3eUP",dropdownTagClose:"DropdownFilters_dropdownTagClose__IEqEb",searchBox:"DropdownFilters_searchBox__wAADf"},I=function(){return(0,f.jsx)("svg",{height:"20",width:"20",viewBox:"0 0 20 20",children:(0,f.jsx)("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"})})},L=function(e){var n=e.placeHolder,t=e.options,r=e.isMulti,a=e.isSearchable,s=e.onChange,l=(0,i.useState)(!1),o=(0,c.Z)(l,2),u=o[0],d=o[1],p=(0,i.useState)(r?[]:null),h=(0,c.Z)(p,2),v=h[0],x=h[1],m=(0,i.useState)(""),g=(0,c.Z)(m,2),_=g[0],k=g[1],C=(0,i.useRef)(null),w=(0,i.useRef)(null);(0,i.useEffect)((function(){k(""),u&&C.current&&C.current.focus()}),[u]),(0,i.useEffect)((function(){var e=function(e){w.current&&!w.current.contains(e.target)&&d(!1)};return window.addEventListener("click",e),function(){window.removeEventListener("click",e)}}));var j=function(e){return null===v||void 0===v?void 0:v.filter((function(n){return n.value!==e.value}))},N=function(e){return r?v.filter((function(n){return n.value===e.value})).length>0:!!v&&v.value===e.value};return(0,f.jsxs)("div",{className:R.dropdownContainer,children:[(0,f.jsxs)("div",{ref:w,onClick:function(){d(!u)},className:R.dropdownInput,children:[(0,f.jsx)("div",{className:R.dropdownSelectedValue,children:v&&0!==v.length?r?(0,f.jsx)("div",{className:R.dropdownTags,children:v.map((function(e){return(0,f.jsxs)("div",{className:R.dropdownTagItem,children:[e.label,(0,f.jsx)("span",{onClick:function(n){return function(e,n){e.stopPropagation();var t=j(n);x(t),s(t)}(n,e)},className:R.dropdownTagClose,children:(0,f.jsx)("i",{className:"fa-solid fa-xmark ml-5 vertical-center-content"})})]},e.value)}))}):v.label:n}),(0,f.jsx)("div",{className:R.dropdownTools,children:(0,f.jsx)("div",{className:R.dropdownTool,children:(0,f.jsx)(I,{})})})]}),u&&(0,f.jsxs)("div",{className:R.dropdownMenu,children:[a&&(0,f.jsx)("div",{className:R.searchBox,children:(0,f.jsx)("input",{onChange:function(e){k(e.target.value)},value:_,ref:C})}),(_?t.filter((function(e){return e.label.toLowerCase().indexOf(_.toLowerCase())>=0})):t).map((function(e){return(0,f.jsxs)("div",{className:"my-10",children:[(0,f.jsx)("input",{onClick:function(){return function(e){var n;n=r?v.findIndex((function(n){return n.value===e.value}))>=0?j(e):[].concat((0,S.Z)(v),[e]):e,x(n),s(n)}(e)},type:"checkbox",checked:N(e)},e.value),(0,f.jsx)("label",{children:e.label})]})}))]})]})},D="AlphabeticalFilter_alphabeticalFilter__7Zvpl",O=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],F=function(e){var n=e.setLetter;return(0,f.jsx)("div",{className:D,children:(0,f.jsx)("ul",{children:O.map((function(e,t){return(0,f.jsx)("li",{onClick:function(){return n(e)},children:e},t)}))})})},B=[{value:"Alcoholic",label:"Alcoholic"},{value:"Non_Alcoholic",label:"Non Alcoholic"},{value:"Ordinary_Drink",label:"Ordinary Drink"},{value:"Cocktail",label:"Cocktail"},{value:"Cocktail_glass",label:"Cocktail glass"},{value:"Champagne_flute",label:"Champagne flute"}];var M=function(){var e=(0,i.useState)("margarita"),n=(0,c.Z)(e,2),t=n[0],d=n[1],h=(0,i.useState)(""),v=(0,c.Z)(h,2),x=v[0],m=v[1],_=(0,i.useState)([]),C=(0,c.Z)(_,2),w=C[0],j=C[1],N=(0,i.useState)(!0),y=(0,c.Z)(N,2),b=y[0],A=y[1],P=(0,i.useReducer)(T,{cocktails:[]}),S=(0,c.Z)(P,2),R=S[0],I=S[1],D=(0,i.useState)(1),O=(0,c.Z)(D,2),M=O[0],U=O[1],H=(0,i.useState)(6),K=(0,c.Z)(H,1)[0],X=M*K,G=X-K,V=R.cocktails.slice(G,X);return(0,i.useEffect)((function(){if(t){m("");Z.searchCocktails(t).then(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||w.length){e.next=5;break}I({type:"CURRENT_COCKTAILS",payload:n||[]}),e.next=14;break;case 5:if(!t||!w.length){e.next=12;break}return e.next=8,Z.searchByFilters(w,n);case 8:(a=e.sent)&&I({type:"CURRENT_COCKTAILS",payload:a}),e.next=14;break;case 12:I({type:"CURRENT_COCKTAILS",payload:[]});case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.error(e)})).finally((function(){A(!1)}))}}),[t,w]),(0,i.useEffect)((function(){x&&(d(""),Z.searchByLetter(x).then(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.length){e.next=4;break}I({type:"CURRENT_COCKTAILS",payload:n||[]}),e.next=8;break;case 4:return e.next=6,Z.searchByFilters(w,n);case 6:(t=e.sent)&&I({type:"CURRENT_COCKTAILS",payload:t});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.error(e)})).finally((function(){A(!1)})))}),[x,w]),(0,f.jsxs)("div",{className:s,children:[(0,f.jsx)("h1",{className:"my-10",children:"D\xe9couvrez des nouvelles recettes"}),(0,f.jsxs)("div",{className:"card flex-fill d-flex flex-column px-10 ".concat(u),children:[(0,f.jsx)(L,{isSearchable:!0,isMulti:!0,placeHolder:"S\xe9lectionner les filtres",options:B,onChange:function(e){return j(e||[])}}),(0,f.jsx)(F,{setLetter:m}),(0,f.jsx)(p,{setFilter:d,currentFilter:t}),b&&!R.cocktails.length?(0,f.jsx)(k,{}):(0,f.jsxs)(f.Fragment,{children:[R.cocktails.length>0?(0,f.jsx)("div",{className:l,children:V.map((function(e,n){return(0,f.jsx)(g,{cocktails:e},n)}))}):(0,f.jsx)("div",{className:o,children:"Aucun r\xe9sultat trouv\xe9"}),!!R.cocktails.length&&(0,f.jsx)(E,{postsPerPage:K,totalPosts:R.cocktails.length,paginate:function(e){U(e)},previousPage:function(){1!==M&&U(M-1)},nextPage:function(){M!==Math.ceil(R.cocktails.length/K)&&U(M+1)},currentPageNumber:M})]})]})]})}}}]);
//# sourceMappingURL=586.f0e549f0.chunk.js.map