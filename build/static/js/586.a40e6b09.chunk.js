"use strict";(self.webpackChunkcocktailsmaster=self.webpackChunkcocktailsmaster||[]).push([[586],{586:function(e,n,t){t.r(n),t.d(n,{default:function(){return B}});var r=t(165),a=t(861),c=t(885),i=t(791),s="HomePage_grid__X3Xvw",l="HomePage_contentCard__k2Ro4",o="Search_searchBar__BNASN",u=t(184);var d=function(e){var n=e.setFilter,t=e.currentFilter;return(0,u.jsxs)("div",{className:"d-flex flex-row justify-content-center align-item-center mt-10 mb-30 ".concat(o),children:[(0,u.jsx)("i",{className:"fa-solid fa-magnifying-glass mr-15"}),(0,u.jsx)("input",{onInput:function(e){var t=e.currentTarget.value;n(t.trim().toLowerCase())},className:"flex-fill",type:"text",placeholder:t})]})},f=t(689),p="Recipe_recipe__a28YQ",h="Recipe_recipeTitle__A9eP6",v="Recipe_imageContainer__UUkBL";var x=function(e){var n=e.cocktails,t=(0,i.useState)(!1),r=(0,c.Z)(t,2),a=r[0],s=r[1],l=(0,f.s0)();return(0,u.jsxs)("div",{className:p,children:[(0,u.jsx)("i",{className:"fa-solid fa-xmark"}),(0,u.jsx)("div",{className:v,children:(0,u.jsx)("img",{src:n.strDrinkThumb,alt:n.strDrink,onClick:function(){return l("/recipe/".concat(n.strDrink))}})}),(0,u.jsxs)("div",{className:"".concat(h," d-flex flex-column justify-content-center align-items-center"),children:[(0,u.jsx)("h3",{className:"mb-10",children:n.strDrink}),(0,u.jsx)("i",{onClick:function(){s(!a)},className:"fa-solid fa-heart ".concat(a?"text-primary":"")})]})]})},m="Loading_spinner__p9lwA";var g=function(){return(0,u.jsx)("div",{className:"d-flex flex-row align-items-center justify-content-center flex-fill",children:(0,u.jsx)("i",{className:"fa-solid fa-spinner ".concat(m)})})},_=t(388),k=function(e){var n=e.includes("Alcoholic")&&!e.includes("Non_Alcoholic")||!e.includes("Alcoholic")&&e.includes("Non_Alcoholic"),t=e.includes("Ordinary_Drink")&&!e.includes("Cocktail")||!e.includes("Ordinary_Drink")&&e.includes("Cocktail"),r=e.includes("Cocktail_glass")&&!e.includes("Champagne_flute")||!e.includes("Cocktail_glass")&&e.includes("Champagne_flute");return{strAlcoholic:n&&e.includes("Alcoholic")?"Alcoholic":n&&e.includes("Non_Alcoholic")?"Non alcoholic":null,strCategory:t&&e.includes("Ordinary_Drink")?"Ordinary Drink":t&&e.includes("Cocktail")?"Cocktail":null,strGlass:r&&e.includes("Cocktail_glass")?"Cocktail glass":r&&e.includes("Champagne_flute")?"Champagne flute":null}},C=function(e,n){var t=Object.keys(n);return e.filter((function(e){return t.every((function(t){return!n[t].length||(Array.isArray(e[t])?e[t].some((function(e){return n[t].includes(e)})):n[t].includes(e[t]))}))}))},w=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a,i,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.map((function(e){return e.value})),e.next=3,k(a);case 3:return i=e.sent,s=Object.fromEntries(Object.entries(i).filter((function(e){return null!==(0,c.Z)(e,2)[1]}))),e.next=7,C(t,s);case 7:return l=e.sent,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),j={filterListByCategories:w},N=_.Z.create({baseURL:"https://www.thecocktaildb.com/api/json/v1/1/"}),y={searchCocktails:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.get("search.php?s=".concat(n));case 3:return t=e.sent,e.abrupt("return",t.data.drinks);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Error fetch cocktails");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),searchByFilters:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.filterListByCategories(n,t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),searchByLetter:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.get("search.php?f=".concat(n));case 3:return t=e.sent,e.abrupt("return",t.data.drinks);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Error fetch cocktails by first letter");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}()},b=t(413);var Z=function(e,n){if("CURRENT_COCKTAILS"===n.type)return(0,b.Z)((0,b.Z)({},e),{},{cocktails:n.payload});throw new Error("action inconnue")},A={pagination:"Paginate_pagination__ckmim",pageNumber:"Paginate_pageNumber__DrBn5",active:"Paginate_active__Z5x5O"},T=function(e){for(var n=e.postsPerPage,t=e.totalPosts,r=e.paginate,a=e.previousPage,c=e.nextPage,i=e.currentPageNumber,s=[],l=1;l<=Math.ceil(t/n);l++)s.push(l);return(0,u.jsx)("div",{className:A.paginationContainer,children:(0,u.jsxs)("ul",{className:A.pagination,children:[(0,u.jsx)("li",{onClick:a,className:A.pageNumber,children:"Prev"}),s.map((function(e,n){return(0,u.jsx)("li",{onClick:function(){return r(e)},className:"".concat(A.pageNumber," ")+(e===i?"".concat(A.active):""),children:e},n)})),(0,u.jsx)("li",{onClick:c,className:A.pageNumber,children:"Next"})]})})},S=t(982),P={dropdownContainer:"DropdownFilters_dropdownContainer__OAbhV",dropdownInput:"DropdownFilters_dropdownInput__9Atdi",dropdownMenu:"DropdownFilters_dropdownMenu__0XwHa",dropdownTags:"DropdownFilters_dropdownTags__obGAc",dropdownTagItem:"DropdownFilters_dropdownTagItem__y3eUP",dropdownTagClose:"DropdownFilters_dropdownTagClose__IEqEb",searchBox:"DropdownFilters_searchBox__wAADf"},D=function(){return(0,u.jsx)("svg",{height:"20",width:"20",viewBox:"0 0 20 20",children:(0,u.jsx)("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"})})},E=function(e){var n=e.placeHolder,t=e.options,r=e.isMulti,a=e.isSearchable,s=e.onChange,l=(0,i.useState)(!1),o=(0,c.Z)(l,2),d=o[0],f=o[1],p=(0,i.useState)(r?[]:null),h=(0,c.Z)(p,2),v=h[0],x=h[1],m=(0,i.useState)(""),g=(0,c.Z)(m,2),_=g[0],k=g[1],C=(0,i.useRef)(null),w=(0,i.useRef)(null);(0,i.useEffect)((function(){k(""),d&&C.current&&C.current.focus()}),[d]),(0,i.useEffect)((function(){var e=function(e){w.current&&!w.current.contains(e.target)&&f(!1)};return window.addEventListener("click",e),function(){window.removeEventListener("click",e)}}));var j=function(e){return null===v||void 0===v?void 0:v.filter((function(n){return n.value!==e.value}))},N=function(e){return r?v.filter((function(n){return n.value===e.value})).length>0:!!v&&v.value===e.value};return(0,u.jsxs)("div",{className:P.dropdownContainer,children:[(0,u.jsxs)("div",{ref:w,onClick:function(){f(!d)},className:P.dropdownInput,children:[(0,u.jsx)("div",{className:P.dropdownSelectedValue,children:v&&0!==v.length?r?(0,u.jsx)("div",{className:P.dropdownTags,children:v.map((function(e){return(0,u.jsxs)("div",{className:P.dropdownTagItem,children:[e.label,(0,u.jsx)("span",{onClick:function(n){return function(e,n){e.stopPropagation();var t=j(n);x(t),s(t)}(n,e)},className:P.dropdownTagClose,children:(0,u.jsx)("i",{className:"fa-solid fa-xmark ml-5 vertical-center-content"})})]},e.value)}))}):v.label:n}),(0,u.jsx)("div",{className:P.dropdownTools,children:(0,u.jsx)("div",{className:P.dropdownTool,children:(0,u.jsx)(D,{})})})]}),d&&(0,u.jsxs)("div",{className:P.dropdownMenu,children:[a&&(0,u.jsx)("div",{className:P.searchBox,children:(0,u.jsx)("input",{onChange:function(e){k(e.target.value)},value:_,ref:C})}),(_?t.filter((function(e){return e.label.toLowerCase().indexOf(_.toLowerCase())>=0})):t).map((function(e){return(0,u.jsxs)("div",{className:"my-10",children:[(0,u.jsx)("input",{onClick:function(){return function(e){var n;n=r?v.findIndex((function(n){return n.value===e.value}))>=0?j(e):[].concat((0,S.Z)(v),[e]):e,x(n),s(n)}(e)},type:"checkbox",checked:N(e)},e.value),(0,u.jsx)("label",{children:e.label})]})}))]})]})},L="AlphabeticalFilter_alphabeticalFilter__7Zvpl",R=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],O=function(e){var n=e.setLetter;return(0,u.jsx)("div",{className:L,children:(0,u.jsx)("ul",{children:R.map((function(e,t){return(0,u.jsx)("li",{onClick:function(){return n(e)},children:e},t)}))})})},F=[{value:"Alcoholic",label:"Alcoholic"},{value:"Non_Alcoholic",label:"Non Alcoholic"},{value:"Ordinary_Drink",label:"Ordinary Drink"},{value:"Cocktail",label:"Cocktail"},{value:"Cocktail_glass",label:"Cocktail glass"},{value:"Champagne_flute",label:"Champagne flute"}];var B=function(){var e=(0,i.useState)("margarita"),n=(0,c.Z)(e,2),t=n[0],o=n[1],f=(0,i.useState)(""),p=(0,c.Z)(f,2),h=p[0],v=p[1],m=(0,i.useState)([]),_=(0,c.Z)(m,2),k=_[0],C=_[1],w=(0,i.useState)(!0),j=(0,c.Z)(w,2),N=j[0],b=j[1],A=(0,i.useReducer)(Z,{cocktails:[]}),S=(0,c.Z)(A,2),P=S[0],D=S[1],L=(0,i.useState)(1),R=(0,c.Z)(L,2),B=R[0],I=R[1],U=(0,i.useState)(6),M=(0,c.Z)(U,1)[0],K=B*M,H=K-M,X=P.cocktails.slice(H,K);return(0,i.useEffect)((function(){if(t){v("");y.searchCocktails(t).then(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||k.length){e.next=5;break}D({type:"CURRENT_COCKTAILS",payload:n||[]}),e.next=14;break;case 5:if(!t||!k.length){e.next=12;break}return e.next=8,y.searchByFilters(k,n);case 8:(a=e.sent)&&D({type:"CURRENT_COCKTAILS",payload:a}),e.next=14;break;case 12:D({type:"CURRENT_COCKTAILS",payload:[]});case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.error(e)})).finally((function(){b(!1)}))}}),[t,k]),(0,i.useEffect)((function(){h&&(o(""),y.searchByLetter(h).then(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k.length){e.next=4;break}D({type:"CURRENT_COCKTAILS",payload:n||[]}),e.next=8;break;case 4:return e.next=6,y.searchByFilters(k,n);case 6:(t=e.sent)&&D({type:"CURRENT_COCKTAILS",payload:t});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.error(e)})).finally((function(){b(!1)})))}),[h,k]),(0,u.jsxs)("div",{className:"flex-fill container d-flex flex-column p-20",children:[(0,u.jsx)("h1",{className:"my-10",children:"D\xe9couvrez des nouvelles recettes"}),(0,u.jsxs)("div",{className:"card flex-fill d-flex flex-column px-10 ".concat(l),children:[(0,u.jsx)(E,{isSearchable:!0,isMulti:!0,placeHolder:"Select filters",options:F,onChange:function(e){return C(e||[])}}),(0,u.jsx)(O,{setLetter:v}),(0,u.jsx)(d,{setFilter:o,currentFilter:t}),N&&!P.cocktails.length?(0,u.jsx)(g,{}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:s,children:X.map((function(e,n){return(0,u.jsx)(x,{cocktails:e},n)}))}),!!P.cocktails.length&&(0,u.jsx)(T,{postsPerPage:M,totalPosts:P.cocktails.length,paginate:function(e){I(e)},previousPage:function(){1!==B&&I(B-1)},nextPage:function(){B!==Math.ceil(P.cocktails.length/M)&&I(B+1)},currentPageNumber:B})]})]})]})}}}]);
//# sourceMappingURL=586.a40e6b09.chunk.js.map